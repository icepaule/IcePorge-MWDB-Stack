# MWDB-core + Karton Stack Configuration
# Copy this file to .env and fill in your values
# Generate secure passwords with: openssl rand -hex 32

# ============================================
# PostgreSQL Database
# ============================================
POSTGRES_USER=mwdb
POSTGRES_PASSWORD=<GENERATE: openssl rand -hex 32>
POSTGRES_DB=mwdb

# ============================================
# MinIO (S3-compatible storage)
# ============================================
MINIO_ROOT_USER=mwdb-minio
MINIO_ROOT_PASSWORD=<GENERATE: openssl rand -hex 32>

# ============================================
# MWDB Core Settings
# ============================================
MWDB_SECRET_KEY=<GENERATE: openssl rand -hex 16>
MWDB_POSTGRES_URI=postgresql://mwdb:<POSTGRES_PASSWORD>@mwdb-postgres:5432/mwdb
MWDB_REDIS_URI=redis://mwdb-redis:6379/0
MWDB_ENABLE_KARTON=1
MWDB_ADMIN_LOGIN=admin
MWDB_ADMIN_PASSWORD=<YOUR_ADMIN_PASSWORD>
MWDB_BASE_URL=http://127.0.0.1:8081

# ============================================
# S3 Storage Configuration
# ============================================
MWDB_STORAGE_PROVIDER=s3
MWDB_S3_STORAGE_ENDPOINT=mwdb-minio:9000
MWDB_S3_STORAGE_ACCESS_KEY=mwdb-minio
MWDB_S3_STORAGE_SECRET_KEY=<SAME_AS_MINIO_ROOT_PASSWORD>
MWDB_S3_STORAGE_BUCKET_NAME=mwdb
MWDB_S3_STORAGE_SECURE=0

# ============================================
# Karton Configuration
# ============================================
KARTON_S3_ACCESS_KEY=mwdb-minio
KARTON_S3_SECRET_KEY=<SAME_AS_MINIO_ROOT_PASSWORD>
KARTON_S3_ADDRESS=http://mwdb-minio:9000
KARTON_S3_BUCKET=karton
KARTON_REDIS_HOST=mwdb-redis
KARTON_REDIS_PORT=6379

# ============================================
# CAPE Integration (for karton-cape-submitter)
# ============================================
# Use host.docker.internal to reach CAPE on host from container
CAPE_SUBMIT_URL=https://host.docker.internal/apiv2/tasks/create/file/
CAPE_TLS_VERIFY=false
CAPE_TAGS_DEFAULT=win11,x64
CAPE_ALLOWED_TAGS=dotnet,dotnet6-9,java,pdf,vcredist,win11,x64

# ============================================
# Storage Paths
# ============================================
MWDB_STORAGE_PATH=/mnt/cape-data/mwdb-storage
